webpackJsonp([18],{281:function(e,t,a){var i=a(2)(a(806),a(807),null,null,null);e.exports=i.exports},347:function(e,t,a){"use strict";function i(e,t){if(0===arguments.length)return null;var a=t||"{y}-{m}-{d} {h}:{i}:{s}",i=void 0;"object"==(void 0===e?"undefined":s()(e))?i=e:(10===(""+e).length&&(e=1e3*parseInt(e)),i=new Date(e));var r={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(e,t){var a=r[t];return"a"===t?["一","二","三","四","五","六","日"][a-1]:(e.length>0&&a<10&&(a="0"+a),a||0)})}t.d=i,t.c=function(e){return e?function(e){for(var t=[],a=0;a<e.length;a++)e[a]&&t.push(e[a]);return t}(n()(e).map(function(t){return void 0===e[t]?"":encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&"):""},t.g=function(e,t){if(e&&t){var a=e.className,i=a.indexOf(t);-1===i?a+=""+t:a=a.substr(0,i)+a.substr(i+t.length),e.className=a}},a.d(t,"e",function(){return c}),t.a=function(e,t,a){var i=void 0,r=void 0,n=void 0,o=void 0,s=void 0,l=function l(){var c=+new Date-o;c<t&&c>0?i=setTimeout(l,t-c):(i=null,a||(s=e.apply(n,r),i||(n=r=null)))};return function(){for(var r=arguments.length,c=Array(r),u=0;u<r;u++)c[u]=arguments[u];n=this,o=+new Date;var d=a&&!i;return i||(i=setTimeout(l,t)),d&&(s=e.apply(n,c),n=c=null),s}},t.f=function(e){var t="error";e.status&&(t="success"),Object(l.Message)({message:e.msg,type:t,duration:2e3})},t.b=function(){var e=new Date;e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0);var t=new Date(e);return t.setMonth(e.getMonth()+1),t.setDate(0),t.setHours(23),t.setMinutes(59),t.setSeconds(59),[e,t]};var r=a(106),n=a.n(r),o=a(16),s=a.n(o),l=a(61),c=(a.n(l),[{text:"今天",onClick:function(e){var t=new Date,a=new Date((new Date).toDateString());t.setTime(a.getTime()),e.$emit("pick",[a,t])}},{text:"最近一周",onClick:function(e){var t=new Date((new Date).toDateString()),a=new Date;a.setTime(t.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date((new Date).toDateString()),a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date((new Date).toDateString()),a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}])},362:function(e,t,a){"use strict";t.c=function(e,t){return Object(i.a)({url:t,method:"get",params:e})},t.a=function(e,t){return Object(i.a)({url:t,method:"post",data:e})},t.d=function(e,t){return Object(i.a)({url:t,method:"put",data:e})},t.b=function(e){return Object(i.a)({url:e,method:"delete"})};var i=a(107)},806:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(62),r=a.n(i),n=a(108),o=a.n(n),s=a(362),l=a(347);t.default={name:"drivers",data:function(){return{listLoading:!0,errors:[],list:null,total:null,pagePath:"/drivers",listQuery:{page:1,per_page:20,mobile:void 0,name:void 0},dialogFormVisible:!1,dialogStatus:"",dialogTextMap:{update:"编辑",create:"新增"},tableKey:0,formData:{},validateRules:{code:[{required:!0,message:"请输入编码",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入司机名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机",trigger:"blur"}],description:[{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]}}},created:function(){this.resetTemp(),this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0,Object(s.c)(this.listQuery,"/drivers").then(function(t){e.list=t.data.data,e.total=t.data.total,e.pagePath=t.data.path,e.listLoading=!1})},handleFilter:function(){this.getList()},handleCreate:function(){this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0},handleUpdate:function(e){this.formData=o()({},e),this.dialogStatus="update",this.dialogFormVisible=!0},handleDelete:function(e){var t=this;Object(s.b)("/drivers").then(function(a){if(200!==a.status)return t.$message({message:a.data.message,type:"error"}),!1;t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3});var i=t.list.indexOf(e);t.list.splice(i,1)})},create:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;Object(s.a)(t.formData,"/drivers").then(function(e){return 422===e.status?(t.errors=e.data,t.$message({message:"表单验证失败",type:"error"}),!1):200!==e.status?(t.$message({message:e.data.message,type:"error"}),!1):(t.formData.id=e.data.id,t.formData.code=e.data.code,t.formData.name=e.data.name,t.formData.mobile=e.data.mobile,t.formData.description=e.data.description,t.list.unshift(t.formData),t.dialogFormVisible=!1,void t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}))})})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;Object(s.d)(t.formData,"/drivers/"+t.formData.id).then(function(e){if(200!==e.status)return t.$message({message:e.data.message,type:"error"}),!1;var a=!0,i=!1,n=void 0;try{for(var o,s=r()(t.list);!(a=(o=s.next()).done);a=!0){var l=o.value;if(l.id===t.formData.id){var c=t.list.indexOf(l);t.list.splice(c,1,t.formData);break}}}catch(e){i=!0,n=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}t.dialogFormVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})})},cancelForm:function(e){this.dialogFormVisible=!1,this.$refs[e].resetFields()},resetTemp:function(){this.formData={id:void 0,code:"",name:"",mobile:"",description:void 0}},handleSizeChange:function(e){this.listQuery.per_page=e,this.getList()},handleCurrentChange:function(e){this.listQuery.page=e,this.getList()},handleDownload:function(){var e=Object(l.c)(this.listQuery);window.location.href="/export/driver?"+e}}}},807:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"filter-container"},[a("span",[e._v("司机姓名")]),e._v(" "),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"司机姓名"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),e._v(" "),a("span",[e._v("电话")]),e._v(" "),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"电话"},model:{value:e.listQuery.mobile,callback:function(t){e.$set(e.listQuery,"mobile",t)},expression:"listQuery.mobile"}}),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:e.handleFilter}},[e._v("搜索")]),e._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:e.handleCreate}},[e._v("添加")]),e._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"document"},on:{click:e.handleDownload}},[e._v("导出")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""},on:{"row-dblclick":e.handleUpdate}},[a("el-table-column",{attrs:{align:"center",label:"序号",width:"65"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"code",label:"编码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"司机名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"手机"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"备注"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":e.listQuery.page,"page-sizes":[10,20,30,50],"page-size":e.listQuery.per_page,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.listQuery,"page",t)}}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTextMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"formData",staticClass:"small-space",staticStyle:{width:"400px","margin-left":"50px"},attrs:{model:e.formData,rules:e.validateRules,"label-position":"left","label-width":"70px"}},[a("el-form-item",{attrs:{label:"编号",prop:"code",error:e.errors.code}},[a("el-input",{model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"司机名称",prop:"name",error:e.errors.name}},[a("el-input",{model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机",prop:"mobile",error:e.errors.mobile}},[a("el-input",{model:{value:e.formData.mobile,callback:function(t){e.$set(e.formData,"mobile",t)},expression:"formData.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"description"}},[a("el-input",{model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.cancelForm("formData")}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.create("formData")}}},[e._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.update("formData")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});