webpackJsonp([9],{283:function(t,e,a){var s=a(2)(a(814),a(815),function(t){a(812)},null,null);t.exports=s.exports},347:function(t,e,a){"use strict";function s(t,e){if(0===arguments.length)return null;var a=e||"{y}-{m}-{d} {h}:{i}:{s}",s=void 0;"object"==(void 0===t?"undefined":r()(t))?s=t:(10===(""+t).length&&(t=1e3*parseInt(t)),s=new Date(t));var i={y:s.getFullYear(),m:s.getMonth()+1,d:s.getDate(),h:s.getHours(),i:s.getMinutes(),s:s.getSeconds(),a:s.getDay()};return a.replace(/{(y|m|d|h|i|s|a)+}/g,function(t,e){var a=i[e];return"a"===e?["一","二","三","四","五","六","日"][a-1]:(t.length>0&&a<10&&(a="0"+a),a||0)})}e.d=s,e.c=function(t){return t?function(t){for(var e=[],a=0;a<t.length;a++)t[a]&&e.push(t[a]);return e}(o()(t).map(function(e){return void 0===t[e]?"":encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&"):""},e.g=function(t,e){if(t&&e){var a=t.className,s=a.indexOf(e);-1===s?a+=""+e:a=a.substr(0,s)+a.substr(s+e.length),t.className=a}},a.d(e,"e",function(){return c}),e.a=function(t,e,a){var s=void 0,i=void 0,o=void 0,n=void 0,r=void 0,l=function l(){var c=+new Date-n;c<e&&c>0?s=setTimeout(l,e-c):(s=null,a||(r=t.apply(o,i),s||(o=i=null)))};return function(){for(var i=arguments.length,c=Array(i),u=0;u<i;u++)c[u]=arguments[u];o=this,n=+new Date;var d=a&&!s;return s||(s=setTimeout(l,e)),d&&(r=t.apply(o,c),o=c=null),r}},e.f=function(t){var e="error";t.status&&(e="success"),Object(l.Message)({message:t.msg,type:e,duration:2e3})},e.b=function(){var t=new Date;t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0);var e=new Date(t);return e.setMonth(t.getMonth()+1),e.setDate(0),e.setHours(23),e.setMinutes(59),e.setSeconds(59),[t,e]};var i=a(106),o=a.n(i),n=a(16),r=a.n(n),l=a(61),c=(a.n(l),[{text:"今天",onClick:function(t){var e=new Date,a=new Date((new Date).toDateString());e.setTime(a.getTime()),t.$emit("pick",[a,e])}},{text:"最近一周",onClick:function(t){var e=new Date((new Date).toDateString()),a=new Date;a.setTime(e.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date((new Date).toDateString()),a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date((new Date).toDateString()),a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}])},362:function(t,e,a){"use strict";e.c=function(t,e){return Object(s.a)({url:e,method:"get",params:t})},e.a=function(t,e){return Object(s.a)({url:e,method:"post",data:t})},e.d=function(t,e){return Object(s.a)({url:e,method:"put",data:t})},e.b=function(t){return Object(s.a)({url:t,method:"delete"})};var s=a(107)},765:function(t,e,a){var s=a(2)(a(768),a(769),function(t){a(766)},null,null);t.exports=s.exports},766:function(t,e,a){var s=a(767);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(7)("29053afa",s,!0)},767:function(t,e,a){(t.exports=a(5)(void 0)).push([t.i,"",""])},768:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(362);e.default={props:{selected:{default:""}},data:function(){return{selectOptions:[],selectAt:"",loading:!1}},mounted:function(){this.selectAt=this.selected,this.getOptions()},methods:{getOptions:function(){var t=this;Object(s.c)({},"/stores").then(function(e){t.selectOptions=e.data})}},watch:{selectAt:function(t){this.$emit("changeSelect",t)}}}},769:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{attrs:{filterable:"",placeholder:"请输入关键词"},model:{value:t.selectAt,callback:function(e){t.selectAt=e},expression:"selectAt"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.selectOptions,function(t){return a("el-option",{key:t.store_id,attrs:{label:t.store_name,value:t.store_id}})})],2)},staticRenderFns:[]}},812:function(t,e,a){var s=a(813);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(7)("141dd97a",s,!0)},813:function(t,e,a){(t.exports=a(5)(void 0)).push([t.i,".el-dialog__body{font-size:16px}.search-more{display:none}.el-table .info-row{background:#c9e5f5}.el-table .positive-row{background:#e2f0e4}.el-button-group .el-button:not(:last-child){margin-right:20px}",""])},814:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(62),i=a.n(s),o=a(108),n=a.n(o),r=a(362),l=a(347),c=a(765),u=a.n(c);e.default={name:"goods_setting",components:{SelectStore:u.a},data:function(){return{listLoading:!1,isSearchMore:!0,list:null,total:null,baseURL:"/goods_settings",selectedRows:[],listQuery:{page:1,per_page:20,sort_by:"goods_id",sort_order:"descending",add_time:void 0,store_id:void 0,goods_id:void 0,goods_name:void 0,goods_serial:void 0,shipping_charging_type:""},typeMap:[{label:"全部",value:""},{label:"按数量计费",value:0},{label:"按金额计费",value:1}],dialogFormVisible:!1,dialogUploadVisible:!1,dialogFormStauts:"",dialogStatus:"update",dialogTextMap:{update:"编辑",create:"新增"},dialogSearchVisible:!1,dialogGoodsListVisible:!1,tableKey:0,formData:{},validateRules:{shipping_rate:[{required:!0,type:"number",message:"必须为数值",trigger:"blur"},{min:0,max:1,message:"必须为 0 ~ 1 的小数",trigger:"blur"}],unpack_fee:[{type:"float",message:"必须为数值",trigger:"blur"}],driver_rate:[{required:!0,type:"number",message:"必须为数值",trigger:"blur"},{min:0,max:1,message:"必须为 0 ~ 1 的小数",trigger:"blur"}]},uploadHeaders:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}},created:function(){this.formData={},this.getList()},computed:{},methods:{getList:function(){var t=this;this.listLoading=!0,Object(r.c)(this.listQuery,this.baseURL).then(function(e){t.list=e.data.data,t.total=e.data.total,t.listLoading=!1})},handleSearch:function(){this.getList()},handleSearchMore:function(){return this.isSearchMore=!this.isSearchMore},cancelForm:function(t){this.dialogFormVisible=!1,this.$refs[t].resetFields()},handleUpdateDialog:function(t){this.formData=n()({},t),this.dialogStatus="update",this.dialogFormVisible=!0},handleUpdate:function(){var t=this;this.$refs.dialogForm.validate(function(e){if(!e)return!1;Object(r.a)(t.formData,t.baseURL).then(function(e){if(200!==e.status)return t.$message({message:e.data.message,type:"error"}),!1;var a=!0,s=!1,o=void 0;try{for(var n,r=i()(t.list);!(a=(n=r.next()).done);a=!0){var l=n.value;if(l.goods_id===t.formData.goods_id){var c=t.list.indexOf(l);t.list.splice(c,1,t.formData);break}}}catch(t){s=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(s)throw o}}t.dialogFormVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:2e3})})})},sortQuery:function(t){this.listQuery.sort_by=t.prop,this.listQuery.sort_order=t.order,this.handleSearch()},showError:function(t){return this.$message({message:t,type:"error"}),!1},handlePrint:function(){var t=window.open("_blank"),e=document.getElementById("print-wrap").innerHTML;return t.document.write(e),t.document.close(),t.print(),!0},handleImport:function(){this.dialogUploadVisible=!0},uploadSuccess:function(t){Object(l.f)(t);var e=t.data;t.status||(window.location.href=this.baseURL+"/download-excel?path="+e.path+"&name="+e.name)},handleExport:function(){var t=Object(l.c)(this.listQuery);window.location.href="/export/goods_settings?"+t},handleSizeChange:function(t){this.listQuery.per_page=t,this.handleSearch()},handleCurrentChange:function(t){this.listQuery.page=t,this.handleSearch()},queryChangeStore:function(t){this.listQuery.store_id=t}}}},815:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container calendar-list-container"},[a("div",{staticClass:"filter-container"},[a("el-row",{attrs:{gutter:10,type:"flex",justify:"left"}},[a("el-button-group",[a("el-button",{staticClass:"top-button-group",attrs:{type:"text"},on:{click:function(e){t.handleImport()}}},[t._v("导入")]),t._v(" "),a("el-button",{staticClass:"top-button-group",attrs:{type:"text"},on:{click:function(e){t.handleExport()}}},[t._v("导出")]),t._v(" "),a("el-button",{staticClass:"top-button-group",attrs:{type:"text"},on:{click:function(e){t.handlePrint()}}},[t._v("打印")])],1)],1),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("span",{staticClass:"demonstration"},[t._v("档口")]),t._v(" "),a("select-store",{attrs:{selected:t.listQuery.store_id},on:{changeSelect:t.queryChangeStore}}),t._v(" "),a("span",{staticClass:"demonstration"},[t._v("货品id")]),t._v(" "),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"货品id"},model:{value:t.listQuery.goods_id,callback:function(e){t.$set(t.listQuery,"goods_id",e)},expression:"listQuery.goods_id"}}),t._v(" "),a("span",{staticClass:"demonstration"},[t._v("货品名称")]),t._v(" "),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"货品名称"},model:{value:t.listQuery.goods_name,callback:function(e){t.$set(t.listQuery,"goods_name",e)},expression:"listQuery.goods_name"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"search"},on:{click:function(e){t.handleSearch()}}},[t._v("查询")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"text"},on:{click:function(e){t.handleSearchMore()}}},[t._v("更多")])],1),t._v(" "),a("div",{class:{"search-more":t.isSearchMore}},[a("el-row",[a("span",{staticClass:"demonstration"},[t._v("货品条码")]),t._v(" "),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"货品条码"},model:{value:t.listQuery.goods_serial,callback:function(e){t.$set(t.listQuery,"goods_serial",e)},expression:"listQuery.goods_serial"}}),t._v(" "),a("span",{staticClass:"demonstration"},[t._v("计费方式")]),t._v(" "),a("el-select",{model:{value:t.listQuery.shipping_charging_type,callback:function(e){t.$set(t.listQuery,"shipping_charging_type",e)},expression:"listQuery.shipping_charging_type"}},t._l(t.typeMap,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],ref:"goodSettingTable",staticStyle:{width:"100%"},attrs:{id:"print-wrap",data:t.list,border:"",fit:"","highlight-current-row":"","default-sort":{prop:"good_id",order:"descending"}},on:{"sort-change":t.sortQuery,"row-dblclick":t.handleUpdateDialog}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"65"}}),t._v(" "),a("el-table-column",{attrs:{prop:"store_name",label:"档口",width:"200",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-col-text"},[t._v(t._s(e.row.store_name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goods_id",label:"SKU",width:"150",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-col-text"},[t._v(t._s(e.row.goods_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"货品名称",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-col-text"},[t._v(t._s(e.row.goods_name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"条码",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-col-text"},[t._v(t._s(e.row.goods_serial))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"货品金额",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-col-text"},[t._v(t._s(e.row.goods_price))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单位",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-col-text"},[t._v(t._s(e.row.g_unit))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"计费方式",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-col-text"},[t._v(t._s(t._f("chargingTypeName")(e.row.shipping_charging_type)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单件费用&费率",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-col-text"},[t._v(t._s(e.row.shipping_rate))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"拆包费（元/件）",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-col-text"},[t._v(t._s(e.row.unpack_fee))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"司机计费方式",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-col-text"},[t._v(t._s(t._f("chargingTypeName")(e.row.driver_charging_type)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"单件费用&费率",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"table-col-text"},[t._v(t._s(e.row.driver_rate))])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.per_page,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTextMap[t.dialogStatus],visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"dialogForm",staticClass:"small-space",staticStyle:{width:"500px","margin-left":"50px"},attrs:{model:t.formData,rule:t.validateRules,"label-position":"left","label-width":"150px"}},[a("el-form-item",{attrs:{label:"档口名称："}},[a("span",{staticClass:"form-item"},[t._v(t._s(t.formData.store_id))])]),t._v(" "),a("el-form-item",{attrs:{label:"SKU："}},[a("span",{staticClass:"form-item"},[t._v(t._s(t.formData.goods_id))])]),t._v(" "),a("el-form-item",{attrs:{label:"货品名称："}},[a("span",{staticClass:"form-item"},[t._v(t._s(t.formData.goods_name))])]),t._v(" "),a("el-form-item",{attrs:{label:"货品条码："}},[a("span",{staticClass:"form-item"},[t._v(t._s(t.formData.goods_serial))])]),t._v(" "),a("el-form-item",{attrs:{label:"单价："}},[a("span",{staticClass:"form-item"},[t._v(t._s(t.formData.goods_price))]),t._v(" "),t.formData.g_unit?a("span",[t._v("/"+t._s(t.formData.g_unit))]):t._e()]),t._v(" "),a("el-form-item",{attrs:{label:"计费方式：",prop:"shipping_charging_type"}},[a("el-radio-group",{model:{value:t.formData.shipping_charging_type,callback:function(e){t.$set(t.formData,"shipping_charging_type",t._n(e))},expression:"formData.shipping_charging_type"}},[a("el-radio",{staticClass:"radio",attrs:{label:0}},[t._v("数量")]),t._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:1}},[t._v("金额")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"单件费用&费率：",prop:"shipping_rate"}},[a("el-input",{model:{value:t.formData.shipping_rate,callback:function(e){t.$set(t.formData,"shipping_rate",t._n(e))},expression:"formData.shipping_rate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"拆包费（元/件）：",prop:"unpack_fee"}},[a("el-input",{model:{value:t.formData.unpack_fee,callback:function(e){t.$set(t.formData,"unpack_fee",t._n(e))},expression:"formData.unpack_fee"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"司机计费方式：",prop:"driver_charging_type"}},[a("el-radio-group",{model:{value:t.formData.driver_charging_type,callback:function(e){t.$set(t.formData,"driver_charging_type",t._n(e))},expression:"formData.driver_charging_type"}},[a("el-radio",{staticClass:"radio",attrs:{label:0}},[t._v("数量")]),t._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:1}},[t._v("金额")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"单件费用&费率：",prop:"driver_rate"}},[a("el-input",{model:{value:t.formData.driver_rate,callback:function(e){t.$set(t.formData,"driver_rate",t._n(e))},expression:"formData.driver_rate"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.cancelForm("dialogForm")}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleUpdate()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"excel导入",visible:t.dialogUploadVisible},on:{"update:visible":function(e){t.dialogUploadVisible=e}}},[a("el-upload",{staticClass:"upload-file",attrs:{headers:t.uploadHeaders,"on-success":t.uploadSuccess,drag:"",action:"/import/goods_settings",name:"file"}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传excel文件，且不超过500kb,\n        "),a("a",{attrs:{href:"/goods_settings/download-excel?path=/exports_demo/&name=goods_setting_demo.xls",target:"_blank"}},[t._v("下载模板")])])])],1)],1)},staticRenderFns:[]}}});